<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <script src="//ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js?iid=13508264" async="true"
        id="sBeacon"></script>
    <iframe src="https://us-u.openx.net/w/1.0/cm?id=dc2068a3-fa3d-4b5f-8a61-3d5a1a58fc05&ph=21f03281-5b83-4670-a0e0-dc15f7542014&r=https%3A%2F%2Fce.lijit.com%2Fmerge%3Fpid%3D76%263pid%3D%7BOPENX_ID%7D"></iframe>
    <iframe src="https://ap.lijit.com/pixel?gdpr=${GDPR}&gdpr_consent=${GDPRString}&redir=https%3A%2F%2Frtb.channelexco.com%2Fcookie_sync%3Fbid%3D8197%26srv%3Dchannelexco.com%26cuid%3D%5BCEDATO_USER_ID%5D%26uid%3D%24UID"></iframe>
    <script>
        var adUnits = [
            {
                code: 'test-div',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 987278
                        }
                    }
                ]
            },
            {
                code: 'test-div2',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 1009207
                        }
                    }
                ]
            },
            {
                code: 'test-div3',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 1034448
                        }
                    }
                ]
            }
        ];

        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];
        pbjs.que.push(function () {
            pbjs.setConfig({
                userSync: {
                    filterSettings: {
                        all: {
                            bidders: '*',
                            filter: 'include'
                        }
                    },
                    syncDelay: 5000 // write image pixels 5 seconds after the auction
                }

            });
            pbjs.setBidderConfig({
                bidders: [
                    'sovrn'
                ],
                config: {
                    ortb2: {
                        badv: ['bnkwines.hg'],
                        bcat: ['IAB25-2', 'IAB25-3', 'IAB25-4', 'IAB25-5']
                    }

                }
            })
        })

    </script>
    <script type="text/javascript" src="main.js" async></script>

    <script>




        pbjs.que.push(function () {
            pbjs.addAdUnits(adUnits);
        });

        // you could instead pass an array of adUnits
        // to getHighestCpmBids() if desired
        function renderAllAdUnits() {
            var winners = pbjs.getHighestCpmBids();
            for (var i = 0; i < winners.length; i++) {
                renderOne(winners[i]);
            }
        }

        function renderOne(winningBid) {
            if (winningBid && winningBid.adId) {
                var div = document.getElementById(winningBid.adUnitCode);
                if (div) {
                    let iframe = document.createElement('iframe');
                    iframe.frameBorder = '0';
                    div.appendChild(iframe);
                    var iframeDoc = iframe.contentWindow.document;
                    pbjs.renderAd(iframeDoc, winningBid.adId);
                }
                console.log("Hello World");
            }

        }

    </script>

    <script>
        pbjs.que.push(function () {
            pbjs.requestBids({
                timeout: 2000,
                bidsBackHandler: renderAllAdUnits
            });
        });
    </script>

</head>

<body>

    <h1>Taboola Test Page</h1>

    <div id='test-div'></div>
    <br />
    <div id='test-div2'></div>
    <br />
    <div id='test-div3'></div>


</body>

</html>