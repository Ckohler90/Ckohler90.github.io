<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css">
    <script src="//ap.lijit.com/www/sovrn_beacon_standalone/sovrn_standalone_beacon.js?iid=13508264" async="true"
        id="sBeacon"></script>
    <script>
        var adUnits = [
            {
                code: 'test-div',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 987278
                        }
                    }
                ]
            },
            {
                code: 'test-div2',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 1009207
                        }
                    }
                ]
            },
            {
                code: 'test-div3',
                mediaTypes: {
                    banner: {
                        sizes: [[300, 250]]
                    }
                },
                bids: [
                    {
                        bidder: 'sovrn',
                        params: {
                            tagid: 1034448
                        }
                    }
                ]
            }
        ];

        var pbjs = pbjs || {};
        pbjs.que = pbjs.que || [];
        pbjs.setConfig({
            userSync: {
                filterSettings: {
                    all: {
                        bidders: '*',
                        filter: 'include'
                    }
                }
            }
        })
        console.log(pbjs.userSync)
    </script>
    <script type="text/javascript" src="main.js" async></script>

    <script>
        pbjs.que.push(function () {
            pbjs.addAdUnits(adUnits);
        });

        // you could instead pass an array of adUnits
        // to getHighestCpmBids() if desired
        function renderAllAdUnits() {
            var winners = pbjs.getHighestCpmBids();
            for (var i = 0; i < winners.length; i++) {
                renderOne(winners[i]);
            }
        }

        function renderOne(winningBid) {
            if (winningBid && winningBid.adId) {
                var div = document.getElementById(winningBid.adUnitCode);
                if (div) {
                    let iframe = document.createElement('iframe');
                    iframe.frameBorder = '0';
                    div.appendChild(iframe);
                    var iframeDoc = iframe.contentWindow.document;
                    pbjs.renderAd(iframeDoc, winningBid.adId);
                }
            }

        }

    </script>

    <script>
        pbjs.que.push(function () {
            pbjs.requestBids({
                timeout: 2000,
                bidsBackHandler: renderAllAdUnits
            });
        });
    </script>

</head>

<body>

    <h1>Taboola Test Page</h1>

    <div id='test-div'></div>
    <br />
    <div id='test-div2'></div>
    <br />
    <div id='test-div3'></div>


</body>

</html>